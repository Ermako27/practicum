# Схлопывание отступов

## Пустой блок
По тем же правилам работает схлопывание отступов в пустом блоке — в котором есть верхний и нижний отступы, но отсутствуют границы, поля и содержимое.

В данном примере второй элемент с классом empty (не виден, так как пустой) имеет верхний и нижний margin по 50px, однако, пространство между первым и третьим элементами не 100 пикселей, а 50. Это является следствием схлопывания двух margin. Логика здесь простая: если в блоке нет никакого содержимого или явно не указаны границы, то данный блок становится фактически не видимым.

### Как избежать схлопывания пустого блока? 
Схлопывание margin не происходит в ситуации, когда что-то находится между ними.

Модифицируем наш пример с пустым блоком добавив в пустой блок padding, равный 1px. Теперь сверху и снизу блока есть margin по 50px.

Теперь попробуем padding заменить на border и убедимся что пустой блок так же имеет margin по 50px.

## Родитель и крайние элементы
Данный сценарий возникает часто когда нужно расположить друг под другом несколько элементов, завернутых в один общий контейнер. 

В следующем примере у нас есть `div` с классом wrapper, и мы задали этому `div` свойство outline красного цвета, чтобы были видны его границы. Все три дочерних элемента имеют margin по 50 пикселей. Тем не менее, первый и последний элементы примыкают к границам элемента-обертки; нет отступа в 50 пикселей между элементом и оберткой

Это происходит потому, что margin дочернего элемента схлопывается с любым margin родителя таким образом, что заканчивается за пределами родителя. Вы можете увидеть это, если проверите дочерний элемент с помощью браузерной панели разработчика.

### Как избежать схлопывания родительского и дочернего maring?
В данном случаем нам так же поможет свойство border, которое нужно добавить родительскому элементу.

## Исключения из правил

Как и в любой другой концепции, здесь тоже бывают исключения, поэтому схлопывание не работает в следующих случаях:
* с «плавающими» блоками, которые используют свойство float;
* с корневыми элементами(html, body);
* с абсолютно позиционируемыми элементами, имеющих свойство и значение position:absolute;
* в строчных элементах.

Так же есть исключения, которые действуют в зависимости от того в какой иерархии находятся блоки
* Если элементы имеют значение свойства `overflow`, отличимое от `visible`, то в таких элементах не схлопываются отступы с отступами их наследников.
* Элементы со свойством `clear` не схлопываются верхними отступами с нижними отступами их родителей.

## Flex и Grid контейнеры
Flex и Grid контейнеры устанавливают соответственно Flex и Grid контексты форматирования для своих дочерних элементов, в этом случае их поведение будет отличаться от поведения в блочном контексте.

Если мы возьмём пример выше и сделаем обёртку Flex-контейнером, указав направление главной оси flex-direction: column, станет понятно, что теперь margin дочерних элементов не выходят за рамки обёртки. Дополнительно, margin между смежными flex-элементами не схлопываются, поэтому мы получаем расстояние в 100 пикселей между flex-элементами, что является суммой верхнего и нижнего margin, которые равны 50px каждый.